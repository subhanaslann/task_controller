{
  "project": {
    "name": "Mini Task Tracker - Frontend Specification",
    "version": "1.0.0",
    "description": "Complete frontend implementation specification for multi-tenant task management system",
    "backend_compatibility": "v1.0.0",
    "last_updated": "2025-11-16"
  },

  "technology_recommendations": {
    "web": {
      "framework_options": ["React 18+", "Vue 3+", "Next.js 14+", "SvelteKit"],
      "state_management": ["Redux Toolkit", "Zustand", "Jotai", "Pinia (Vue)", "Context API"],
      "routing": ["React Router v6", "Vue Router", "Next.js App Router", "TanStack Router"],
      "http_client": ["Axios", "Fetch API", "TanStack Query", "SWR"],
      "ui_libraries": ["Material-UI (MUI)", "Ant Design", "shadcn/ui", "Tailwind CSS + HeadlessUI"],
      "form_handling": ["React Hook Form", "Formik", "VeeValidate (Vue)", "Zod validation"],
      "storage": ["localStorage for JWT", "sessionStorage", "IndexedDB for offline"]
    },
    "mobile": {
      "framework_options": ["Flutter", "React Native", "Kotlin (Android)", "Swift (iOS)"],
      "state_management": ["Riverpod (Flutter)", "Redux", "MobX", "Provider"],
      "storage": ["flutter_secure_storage", "React Native Keychain", "Encrypted SharedPreferences"]
    },
    "desktop": {
      "framework_options": ["Electron", "Tauri", "Flutter Desktop"],
      "considerations": ["Native file system access", "System tray integration", "Auto-updates"]
    }
  },

  "backend_api": {
    "base_url": "https://api.diplomam.net",
    "base_url_dev": "http://localhost:8080",
    "authentication": {
      "type": "JWT Bearer Token",
      "header": "Authorization: Bearer {token}",
      "token_storage": "Secure storage (encrypted)",
      "token_expiry": "7 days",
      "refresh_strategy": "Re-login on 401 error"
    },
    "content_type": "application/json",
    "error_format": {
      "structure": {
        "error": {
          "code": "string (ERROR_CODE)",
          "message": "string (Human-readable message)"
        }
      },
      "status_codes": {
        "200": "Success",
        "201": "Created",
        "400": "Validation error",
        "401": "Unauthorized (invalid/missing token)",
        "403": "Forbidden (insufficient permissions)",
        "404": "Resource not found",
        "409": "Conflict (duplicate resource)",
        "503": "Service unavailable"
      }
    }
  },

  "data_models": {
    "User": {
      "typescript_interface": "interface User { id: string; organizationId: string; name: string; username: string; email: string; role: 'ADMIN' | 'TEAM_MANAGER' | 'MEMBER' | 'GUEST'; active: boolean; createdAt: string; updatedAt: string; visibleTopicIds?: string[]; }",
      "fields": {
        "id": { "type": "UUID", "required": true, "description": "User unique identifier" },
        "organizationId": { "type": "UUID", "required": true, "description": "Organization this user belongs to" },
        "name": { "type": "string", "required": true, "description": "Full name", "min_length": 1, "max_length": 100 },
        "username": { "type": "string", "required": true, "description": "Unique username within org", "min_length": 3, "max_length": 50 },
        "email": { "type": "string", "required": true, "description": "Email address", "format": "email" },
        "role": { "type": "enum", "required": true, "values": ["ADMIN", "TEAM_MANAGER", "MEMBER", "GUEST"], "description": "User role" },
        "active": { "type": "boolean", "required": true, "description": "User active status" },
        "createdAt": { "type": "ISO8601 datetime", "required": true },
        "updatedAt": { "type": "ISO8601 datetime", "required": true },
        "visibleTopicIds": { "type": "UUID[]", "required": false, "description": "For GUEST users only - accessible topics" }
      },
      "validation_rules": {
        "name": "Min 1 char, max 100 chars",
        "username": "Min 3 chars, alphanumeric + underscore",
        "email": "Valid email format",
        "role": "One of: ADMIN, TEAM_MANAGER, MEMBER, GUEST"
      }
    },

    "Organization": {
      "typescript_interface": "interface Organization { id: string; name: string; teamName: string; slug: string; isActive: boolean; maxUsers: number; createdAt: string; updatedAt: string; }",
      "fields": {
        "id": { "type": "UUID", "required": true },
        "name": { "type": "string", "required": true, "description": "Company name" },
        "teamName": { "type": "string", "required": true, "description": "Team name" },
        "slug": { "type": "string", "required": true, "description": "URL-friendly identifier", "unique": true },
        "isActive": { "type": "boolean", "required": true, "default": true },
        "maxUsers": { "type": "number", "required": true, "default": 15 },
        "createdAt": { "type": "ISO8601 datetime", "required": true },
        "updatedAt": { "type": "ISO8601 datetime", "required": true }
      }
    },

    "Task": {
      "typescript_interface": "interface Task { id: string; organizationId: string; topicId: string | null; title: string; note: string | null; assigneeId: string | null; status: 'TODO' | 'IN_PROGRESS' | 'DONE'; priority: 'LOW' | 'NORMAL' | 'HIGH'; dueDate: string | null; createdAt: string; updatedAt: string; completedAt: string | null; topic?: Topic; assignee?: { id: string; name: string; username?: string; }; }",
      "fields": {
        "id": { "type": "UUID", "required": true },
        "organizationId": { "type": "UUID", "required": true },
        "topicId": { "type": "UUID", "required": false, "nullable": true },
        "title": { "type": "string", "required": true, "min_length": 1, "max_length": 200 },
        "note": { "type": "string", "required": false, "nullable": true, "max_length": 2000 },
        "assigneeId": { "type": "UUID", "required": false, "nullable": true },
        "status": { "type": "enum", "required": true, "values": ["TODO", "IN_PROGRESS", "DONE"], "default": "TODO" },
        "priority": { "type": "enum", "required": true, "values": ["LOW", "NORMAL", "HIGH"], "default": "NORMAL" },
        "dueDate": { "type": "ISO8601 datetime", "required": false, "nullable": true },
        "createdAt": { "type": "ISO8601 datetime", "required": true },
        "updatedAt": { "type": "ISO8601 datetime", "required": true },
        "completedAt": { "type": "ISO8601 datetime", "required": false, "nullable": true, "description": "Auto-set when status changes to DONE" },
        "topic": { "type": "Topic", "required": false, "description": "Populated topic object" },
        "assignee": { "type": "object", "required": false, "description": "Assignee details", "fields": { "id": "UUID", "name": "string", "username": "string (not visible to GUEST)" } }
      },
      "guest_filtered_fields": {
        "description": "When role=GUEST, these fields are returned",
        "fields": ["id", "title", "status", "priority", "dueDate", "assignee.id", "assignee.name"],
        "hidden_fields": ["note", "assignee.username", "topicId", "organizationId", "createdAt", "updatedAt", "completedAt"]
      }
    },

    "Topic": {
      "typescript_interface": "interface Topic { id: string; organizationId: string; title: string; description: string | null; isActive: boolean; createdAt: string; updatedAt: string; tasks?: Task[]; _count?: { tasks: number }; }",
      "fields": {
        "id": { "type": "UUID", "required": true },
        "organizationId": { "type": "UUID", "required": true },
        "title": { "type": "string", "required": true, "min_length": 1, "max_length": 100 },
        "description": { "type": "string", "required": false, "nullable": true, "max_length": 500 },
        "isActive": { "type": "boolean", "required": true, "default": true },
        "createdAt": { "type": "ISO8601 datetime", "required": true },
        "updatedAt": { "type": "ISO8601 datetime", "required": true },
        "tasks": { "type": "Task[]", "required": false, "description": "Populated tasks array" },
        "_count": { "type": "object", "required": false, "description": "Task count", "fields": { "tasks": "number" } }
      }
    },

    "LoginResponse": {
      "typescript_interface": "interface LoginResponse { token: string; user: User; organization: Organization; }",
      "fields": {
        "token": { "type": "string", "required": true, "description": "JWT token" },
        "user": { "type": "User", "required": true, "description": "Logged-in user with visibleTopicIds" },
        "organization": { "type": "Organization", "required": true, "description": "User's organization" }
      },
      "storage_instructions": "Store token in secure storage, user and organization in app state"
    },

    "OrganizationStats": {
      "typescript_interface": "interface OrganizationStats { userCount: number; activeUserCount: number; taskCount: number; activeTaskCount: number; completedTaskCount: number; topicCount: number; activeTopicCount: number; }",
      "fields": {
        "userCount": { "type": "number", "description": "Total users" },
        "activeUserCount": { "type": "number", "description": "Active users" },
        "taskCount": { "type": "number", "description": "Total tasks" },
        "activeTaskCount": { "type": "number", "description": "TODO + IN_PROGRESS tasks" },
        "completedTaskCount": { "type": "number", "description": "DONE tasks" },
        "topicCount": { "type": "number", "description": "Total topics" },
        "activeTopicCount": { "type": "number", "description": "Active topics" }
      }
    }
  },

  "api_endpoints": {
    "authentication": {
      "login": {
        "method": "POST",
        "path": "/auth/login",
        "description": "Login with username/email and password",
        "requires_auth": false,
        "request": {
          "body": {
            "usernameOrEmail": { "type": "string", "required": true, "description": "Username or email" },
            "password": { "type": "string", "required": true, "description": "Password" }
          },
          "example": {
            "usernameOrEmail": "john@acme.com",
            "password": "manager123"
          }
        },
        "response": {
          "success_status": 200,
          "body": {
            "token": "string (JWT)",
            "user": "User object with visibleTopicIds array",
            "organization": "Organization object"
          },
          "example": {
            "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
            "user": {
              "id": "uuid",
              "organizationId": "uuid",
              "name": "John Manager",
              "username": "john",
              "email": "john@acme.com",
              "role": "TEAM_MANAGER",
              "active": true,
              "visibleTopicIds": []
            },
            "organization": {
              "id": "uuid",
              "name": "Acme Corporation",
              "teamName": "Engineering Team",
              "slug": "acme-engineering",
              "isActive": true,
              "maxUsers": 15
            }
          }
        },
        "errors": {
          "401": { "code": "UNAUTHORIZED", "message": "Invalid credentials" },
          "401_inactive_user": { "code": "UNAUTHORIZED", "message": "Account is deactivated" },
          "403": { "code": "ORGANIZATION_INACTIVE", "message": "Your organization has been deactivated. Please contact support." }
        }
      },

      "register": {
        "method": "POST",
        "path": "/auth/register",
        "description": "Register a new team (organization) with team manager",
        "requires_auth": false,
        "request": {
          "body": {
            "companyName": { "type": "string", "required": true, "min_length": 2, "max_length": 100 },
            "teamName": { "type": "string", "required": true, "min_length": 2, "max_length": 100 },
            "managerName": { "type": "string", "required": true, "min_length": 2, "max_length": 100 },
            "email": { "type": "string", "required": true, "format": "email" },
            "password": { "type": "string", "required": true, "min_length": 8, "max_length": 100 }
          },
          "example": {
            "companyName": "Tech Innovations Inc",
            "teamName": "Product Team",
            "managerName": "Jane Smith",
            "email": "jane@techinnovations.com",
            "password": "SecurePass123!"
          }
        },
        "response": {
          "success_status": 201,
          "body": {
            "message": "Team registered successfully",
            "data": {
              "organization": "Organization object",
              "user": "User object",
              "token": "JWT token"
            }
          }
        },
        "errors": {
          "409": { "code": "CONFLICT", "message": "Email is already registered" },
          "400": { "code": "VALIDATION_ERROR", "message": "Could not generate valid slug from company and team names" }
        }
      }
    },

    "tasks": {
      "view_tasks": {
        "method": "GET",
        "path": "/tasks/view",
        "description": "Get tasks based on scope (my_active, team_active, my_done)",
        "requires_auth": true,
        "required_roles": ["ALL"],
        "query_parameters": {
          "scope": {
            "type": "enum",
            "required": true,
            "values": ["my_active", "team_active", "my_done"],
            "description": "Task scope filter"
          }
        },
        "response": {
          "success_status": 200,
          "body": {
            "tasks": "Task[] (with populated topic and assignee)"
          },
          "example": {
            "tasks": [
              {
                "id": "uuid",
                "organizationId": "uuid",
                "topicId": "uuid",
                "title": "Implement user authentication",
                "note": "Use JWT tokens",
                "assigneeId": "uuid",
                "status": "IN_PROGRESS",
                "priority": "HIGH",
                "dueDate": "2025-11-20T00:00:00.000Z",
                "createdAt": "2025-11-15T10:00:00.000Z",
                "updatedAt": "2025-11-16T15:30:00.000Z",
                "completedAt": null,
                "topic": {
                  "id": "uuid",
                  "title": "Backend Development"
                },
                "assignee": {
                  "id": "uuid",
                  "name": "Alice Johnson",
                  "username": "alice"
                }
              }
            ]
          },
          "guest_response_note": "GUEST users receive filtered tasks with only: id, title, status, priority, dueDate, assignee.id, assignee.name (no username, note, etc.)"
        },
        "scope_behavior": {
          "my_active": "Returns current user's tasks with status TODO or IN_PROGRESS",
          "team_active": "Returns all organization tasks with status TODO or IN_PROGRESS (guest-filtered)",
          "my_done": "Returns current user's tasks with status DONE"
        },
        "sorting": {
          "my_active": "priority DESC, dueDate ASC, createdAt DESC",
          "team_active": "priority DESC, dueDate ASC, createdAt DESC",
          "my_done": "completedAt DESC"
        }
      },

      "update_task_status": {
        "method": "PATCH",
        "path": "/tasks/view/:id/status",
        "description": "Update task status (quick status change)",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER", "MEMBER (own tasks only)"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true, "description": "Task ID" }
        },
        "request": {
          "body": {
            "status": {
              "type": "enum",
              "required": true,
              "values": ["TODO", "IN_PROGRESS", "DONE"]
            }
          },
          "example": { "status": "DONE" }
        },
        "response": {
          "success_status": 200,
          "body": { "task": "Updated Task object" }
        },
        "business_rules": {
          "auto_timestamp": "When status changes to DONE, completedAt is auto-set to current timestamp",
          "clear_timestamp": "When status changes from DONE to TODO/IN_PROGRESS, completedAt is cleared",
          "ownership": "MEMBER can only update their own tasks. ADMIN and TEAM_MANAGER can update any task"
        },
        "errors": {
          "403": { "code": "FORBIDDEN", "message": "You can only update your own tasks" },
          "403_guest": { "code": "FORBIDDEN", "message": "Guest users cannot update tasks" },
          "404": { "code": "NOT_FOUND", "message": "Task not found" }
        }
      },

      "create_member_task": {
        "method": "POST",
        "path": "/tasks",
        "description": "Create task for self (member self-assignment)",
        "requires_auth": true,
        "required_roles": ["MEMBER", "TEAM_MANAGER", "ADMIN"],
        "forbidden_roles": ["GUEST"],
        "request": {
          "body": {
            "topicId": { "type": "UUID", "required": false, "description": "Topic ID (optional)" },
            "title": { "type": "string", "required": true, "min_length": 1 },
            "note": { "type": "string", "required": false },
            "priority": { "type": "enum", "required": false, "values": ["LOW", "NORMAL", "HIGH"], "default": "NORMAL" },
            "dueDate": { "type": "ISO8601 datetime", "required": false }
          },
          "example": {
            "topicId": "uuid",
            "title": "Fix login bug",
            "note": "Users can't login with email",
            "priority": "HIGH",
            "dueDate": "2025-11-25T00:00:00.000Z"
          }
        },
        "response": {
          "success_status": 201,
          "body": { "task": "Created Task object (automatically assigned to current user)" }
        },
        "business_rules": {
          "auto_assignment": "Task is automatically assigned to the current user (assigneeId = current user)",
          "default_status": "Status is always TODO",
          "topic_validation": "If topicId provided, topic must exist, be active, and belong to user's organization"
        },
        "errors": {
          "403": { "code": "FORBIDDEN", "message": "Guest users cannot create tasks" },
          "400": { "code": "VALIDATION_ERROR", "message": "Topic not found" },
          "400_inactive": { "code": "VALIDATION_ERROR", "message": "Cannot create task for inactive topic" }
        }
      },

      "update_member_task": {
        "method": "PATCH",
        "path": "/tasks/:id",
        "description": "Update own task (member full update)",
        "requires_auth": true,
        "required_roles": ["MEMBER", "TEAM_MANAGER", "ADMIN"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "request": {
          "body": {
            "title": { "type": "string", "required": false, "min_length": 1 },
            "note": { "type": "string", "required": false, "nullable": true },
            "status": { "type": "enum", "required": false, "values": ["TODO", "IN_PROGRESS", "DONE"] },
            "priority": { "type": "enum", "required": false, "values": ["LOW", "NORMAL", "HIGH"] },
            "dueDate": { "type": "ISO8601 datetime", "required": false, "nullable": true }
          },
          "example": {
            "title": "Fix critical login bug",
            "status": "IN_PROGRESS",
            "priority": "HIGH"
          }
        },
        "response": {
          "success_status": 200,
          "body": { "task": "Updated Task object" }
        },
        "business_rules": {
          "ownership": "Members can only update their own tasks",
          "completedAt": "Auto-managed when status changes to/from DONE"
        },
        "errors": {
          "403": { "code": "FORBIDDEN", "message": "You can only update your own tasks" }
        }
      },

      "delete_member_task": {
        "method": "DELETE",
        "path": "/tasks/:id",
        "description": "Delete own task",
        "requires_auth": true,
        "required_roles": ["MEMBER", "TEAM_MANAGER", "ADMIN"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "response": {
          "success_status": 200,
          "body": { "success": true }
        },
        "business_rules": {
          "ownership": "Members can only delete their own tasks. ADMIN and TEAM_MANAGER can delete any task"
        },
        "errors": {
          "403": { "code": "FORBIDDEN", "message": "You can only delete your own tasks" }
        }
      }
    },

    "admin_tasks": {
      "list_all_tasks": {
        "method": "GET",
        "path": "/admin/tasks",
        "description": "List all tasks in organization",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "response": {
          "success_status": 200,
          "body": { "tasks": "Task[] (all tasks, sorted by status ASC, priority DESC, createdAt DESC)" }
        }
      },

      "get_task": {
        "method": "GET",
        "path": "/admin/tasks/:id",
        "description": "Get task by ID",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "response": {
          "success_status": 200,
          "body": { "task": "Task object with populated topic and assignee" }
        }
      },

      "create_task": {
        "method": "POST",
        "path": "/admin/tasks",
        "description": "Create task (admin can assign to any user)",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "request": {
          "body": {
            "topicId": { "type": "UUID", "required": false },
            "title": { "type": "string", "required": true, "min_length": 1 },
            "note": { "type": "string", "required": false },
            "assigneeId": { "type": "UUID", "required": false, "description": "Can assign to any user in org" },
            "status": { "type": "enum", "required": false, "values": ["TODO", "IN_PROGRESS", "DONE"], "default": "TODO" },
            "priority": { "type": "enum", "required": false, "values": ["LOW", "NORMAL", "HIGH"], "default": "NORMAL" },
            "dueDate": { "type": "ISO8601 datetime", "required": false }
          },
          "example": {
            "topicId": "uuid",
            "title": "Code review for PR #123",
            "note": "Priority review needed",
            "assigneeId": "uuid-of-alice",
            "status": "TODO",
            "priority": "HIGH",
            "dueDate": "2025-11-18T00:00:00.000Z"
          }
        },
        "response": {
          "success_status": 201,
          "body": { "task": "Created Task object" }
        },
        "errors": {
          "400": { "code": "VALIDATION_ERROR", "message": "Assignee not found in your organization" }
        }
      },

      "update_task": {
        "method": "PATCH",
        "path": "/admin/tasks/:id",
        "description": "Update any task",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "request": {
          "body": {
            "title": { "type": "string", "required": false, "min_length": 1 },
            "note": { "type": "string", "required": false, "nullable": true },
            "status": { "type": "enum", "required": false, "values": ["TODO", "IN_PROGRESS", "DONE"] },
            "priority": { "type": "enum", "required": false, "values": ["LOW", "NORMAL", "HIGH"] },
            "dueDate": { "type": "ISO8601 datetime", "required": false, "nullable": true }
          }
        },
        "response": {
          "success_status": 200,
          "body": { "task": "Updated Task object" }
        }
      },

      "delete_task": {
        "method": "DELETE",
        "path": "/admin/tasks/:id",
        "description": "Delete any task",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "response": {
          "success_status": 200,
          "body": { "success": true }
        }
      }
    },

    "topics": {
      "get_active_topics": {
        "method": "GET",
        "path": "/topics/active",
        "description": "Get active topics with tasks (guest-filtered)",
        "requires_auth": true,
        "required_roles": ["ALL"],
        "response": {
          "success_status": 200,
          "body": {
            "topics": "Topic[] with populated tasks array"
          },
          "guest_filtering": "GUEST users only see topics they have access to (via GuestTopicAccess table)",
          "example": {
            "topics": [
              {
                "id": "uuid",
                "organizationId": "uuid",
                "title": "Backend Development",
                "description": "API and database tasks",
                "isActive": true,
                "createdAt": "2025-11-01T00:00:00.000Z",
                "updatedAt": "2025-11-01T00:00:00.000Z",
                "tasks": [
                  {
                    "id": "uuid",
                    "title": "Implement API endpoint",
                    "status": "TODO",
                    "priority": "HIGH",
                    "assignee": {
                      "id": "uuid",
                      "name": "Alice Johnson",
                      "username": "alice"
                    }
                  }
                ]
              }
            ]
          }
        }
      }
    },

    "admin_topics": {
      "list_topics": {
        "method": "GET",
        "path": "/admin/topics",
        "description": "List all topics",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "response": {
          "success_status": 200,
          "body": {
            "topics": "Topic[] with _count.tasks"
          }
        }
      },

      "get_topic": {
        "method": "GET",
        "path": "/admin/topics/:id",
        "description": "Get topic by ID with tasks",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "response": {
          "success_status": 200,
          "body": { "topic": "Topic object with populated tasks array" }
        }
      },

      "create_topic": {
        "method": "POST",
        "path": "/admin/topics",
        "description": "Create topic",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "request": {
          "body": {
            "title": { "type": "string", "required": true, "min_length": 1 },
            "description": { "type": "string", "required": false },
            "isActive": { "type": "boolean", "required": false, "default": true }
          },
          "example": {
            "title": "Frontend Development",
            "description": "UI/UX implementation tasks",
            "isActive": true
          }
        },
        "response": {
          "success_status": 201,
          "body": { "topic": "Created Topic object" }
        }
      },

      "update_topic": {
        "method": "PATCH",
        "path": "/admin/topics/:id",
        "description": "Update topic",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "request": {
          "body": {
            "title": { "type": "string", "required": false, "min_length": 1 },
            "description": { "type": "string", "required": false, "nullable": true },
            "isActive": { "type": "boolean", "required": false }
          }
        },
        "response": {
          "success_status": 200,
          "body": { "topic": "Updated Topic object" }
        }
      },

      "delete_topic": {
        "method": "DELETE",
        "path": "/admin/topics/:id",
        "description": "Delete topic (cascades to tasks via onDelete: SetNull)",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "response": {
          "success_status": 200,
          "body": { "success": true, "message": "Topic deleted successfully" }
        }
      }
    },

    "users": {
      "list_users": {
        "method": "GET",
        "path": "/users",
        "description": "List all users in organization",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "response": {
          "success_status": 200,
          "body": {
            "users": "User[] with visibleTopicIds (sorted by createdAt DESC)"
          }
        }
      },

      "get_user": {
        "method": "GET",
        "path": "/users/:id",
        "description": "Get user by ID",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "response": {
          "success_status": 200,
          "body": { "user": "User object with visibleTopicIds" }
        }
      },

      "create_user": {
        "method": "POST",
        "path": "/users",
        "description": "Create new user (enforces 15 user limit)",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "request": {
          "body": {
            "name": { "type": "string", "required": true, "min_length": 1 },
            "username": { "type": "string", "required": true, "min_length": 3 },
            "email": { "type": "string", "required": true, "format": "email" },
            "password": { "type": "string", "required": true, "min_length": 6 },
            "role": { "type": "enum", "required": true, "values": ["ADMIN", "TEAM_MANAGER", "MEMBER", "GUEST"] },
            "active": { "type": "boolean", "required": false, "default": true },
            "visibleTopicIds": { "type": "UUID[]", "required": false, "description": "For GUEST users - accessible topics" }
          },
          "example": {
            "name": "David Wilson",
            "username": "david",
            "email": "david@acme.com",
            "password": "secure123",
            "role": "MEMBER",
            "active": true
          }
        },
        "response": {
          "success_status": 201,
          "body": { "user": "Created User object" }
        },
        "business_rules": {
          "user_limit": "Max 15 active users per organization",
          "team_manager_restrictions": [
            "TEAM_MANAGER cannot create ADMIN users",
            "TEAM_MANAGER cannot create other TEAM_MANAGER users"
          ],
          "guest_topics": "If role=GUEST and visibleTopicIds provided, creates GuestTopicAccess records"
        },
        "errors": {
          "403": { "code": "ORGANIZATION_USER_LIMIT_REACHED", "message": "Your organization has reached the maximum of 15 users" },
          "403_permission": { "code": "FORBIDDEN", "message": "Team Managers cannot create Admin users" }
        }
      },

      "update_user": {
        "method": "PATCH",
        "path": "/users/:id",
        "description": "Update user",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "request": {
          "body": {
            "name": { "type": "string", "required": false, "min_length": 1 },
            "role": { "type": "enum", "required": false, "values": ["ADMIN", "TEAM_MANAGER", "MEMBER", "GUEST"] },
            "active": { "type": "boolean", "required": false },
            "password": { "type": "string", "required": false, "min_length": 6 },
            "visibleTopicIds": { "type": "UUID[]", "required": false, "description": "Update accessible topics for GUEST" }
          },
          "example": {
            "active": false
          }
        },
        "response": {
          "success_status": 200,
          "body": { "user": "Updated User object" }
        },
        "business_rules": {
          "team_manager_restrictions": [
            "Cannot promote to ADMIN",
            "Cannot promote to TEAM_MANAGER"
          ],
          "activation_limit": "Activating inactive user checks 15 user limit",
          "guest_topics": "Updates GuestTopicAccess records when visibleTopicIds provided"
        }
      },

      "delete_user": {
        "method": "DELETE",
        "path": "/users/:id",
        "description": "Soft delete user (sets active=false)",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "response": {
          "success_status": 200,
          "body": { "success": true, "message": "User deactivated successfully" }
        },
        "business_rules": {
          "soft_delete": "User is deactivated, not permanently deleted"
        }
      }
    },

    "organization": {
      "get_organization": {
        "method": "GET",
        "path": "/organization/:id",
        "description": "Get organization details",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "response": {
          "success_status": 200,
          "body": { "organization": "Organization object" }
        }
      },

      "update_organization": {
        "method": "PATCH",
        "path": "/organization/:id",
        "description": "Update organization settings",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "request": {
          "body": {
            "name": { "type": "string", "required": false },
            "teamName": { "type": "string", "required": false },
            "maxUsers": { "type": "number", "required": false, "description": "ADMIN only" }
          }
        },
        "response": {
          "success_status": 200,
          "body": { "organization": "Updated Organization object" }
        }
      },

      "get_organization_stats": {
        "method": "GET",
        "path": "/organization/:id/stats",
        "description": "Get organization statistics",
        "requires_auth": true,
        "required_roles": ["ADMIN", "TEAM_MANAGER"],
        "path_parameters": {
          "id": { "type": "UUID", "required": true }
        },
        "response": {
          "success_status": 200,
          "body": { "stats": "OrganizationStats object" },
          "example": {
            "stats": {
              "userCount": 8,
              "activeUserCount": 7,
              "taskCount": 45,
              "activeTaskCount": 23,
              "completedTaskCount": 22,
              "topicCount": 5,
              "activeTopicCount": 4
            }
          }
        }
      }
    },

    "health": {
      "health_check": {
        "method": "GET",
        "path": "/health",
        "description": "Health check endpoint",
        "requires_auth": false,
        "response": {
          "success_status": 200,
          "body": {
            "status": "string (healthy|unhealthy)",
            "timestamp": "ISO8601 datetime",
            "environment": "string",
            "database": "string (connected|disconnected)",
            "uptime": "number (seconds)",
            "memory": { "used": "number (MB)", "total": "number (MB)" },
            "organizations": "number",
            "activeOrganizations": "number"
          }
        }
      }
    }
  },

  "user_interface": {
    "screens": {
      "authentication": {
        "login_screen": {
          "route": "/login",
          "description": "User login screen",
          "layout": "Centered form on branded background",
          "components": [
            {
              "type": "Logo/Branding",
              "position": "Top center",
              "content": "App name and logo"
            },
            {
              "type": "Form",
              "fields": [
                {
                  "name": "usernameOrEmail",
                  "label": "Username or Email",
                  "type": "text",
                  "placeholder": "Enter your username or email",
                  "required": true,
                  "validation": "Min 1 character",
                  "icon": "person/email icon"
                },
                {
                  "name": "password",
                  "label": "Password",
                  "type": "password",
                  "placeholder": "Enter your password",
                  "required": true,
                  "validation": "Min 1 character",
                  "icon": "lock icon",
                  "features": ["show/hide toggle"]
                }
              ],
              "submit_button": {
                "text": "Sign In",
                "variant": "primary",
                "full_width": true,
                "loading_state": "Shows spinner while authenticating"
              }
            },
            {
              "type": "Link",
              "text": "Don't have a team? Register here",
              "action": "Navigate to /register",
              "position": "Below form"
            },
            {
              "type": "Test Credentials Display (dev only)",
              "content": "Show sample credentials for quick testing",
              "conditional": "Only in development mode"
            }
          ],
          "error_handling": {
            "invalid_credentials": "Show error message above form: 'Invalid username/email or password'",
            "inactive_account": "Show error: 'Your account has been deactivated. Contact your team manager.'",
            "inactive_org": "Show error: 'Your organization has been deactivated. Please contact support.'",
            "network_error": "Show error: 'Unable to connect to server. Please check your internet connection.'"
          },
          "success_flow": {
            "action": "Store JWT token in secure storage",
            "redirect": "/home (main app)",
            "state_update": "Set authenticated user and organization in global state"
          }
        },

        "registration_screen": {
          "route": "/register",
          "description": "New team registration",
          "layout": "Multi-step form or single page",
          "components": [
            {
              "type": "Form",
              "title": "Create Your Team",
              "fields": [
                {
                  "name": "companyName",
                  "label": "Company Name",
                  "type": "text",
                  "required": true,
                  "validation": "2-100 characters",
                  "placeholder": "Your company name"
                },
                {
                  "name": "teamName",
                  "label": "Team Name",
                  "type": "text",
                  "required": true,
                  "validation": "2-100 characters",
                  "placeholder": "Engineering, Marketing, etc."
                },
                {
                  "name": "managerName",
                  "label": "Your Name",
                  "type": "text",
                  "required": true,
                  "validation": "2-100 characters",
                  "placeholder": "Full name"
                },
                {
                  "name": "email",
                  "label": "Email Address",
                  "type": "email",
                  "required": true,
                  "validation": "Valid email format",
                  "placeholder": "you@company.com"
                },
                {
                  "name": "password",
                  "label": "Password",
                  "type": "password",
                  "required": true,
                  "validation": "8-100 characters",
                  "placeholder": "Choose a strong password",
                  "features": ["show/hide toggle", "strength indicator"]
                },
                {
                  "name": "confirmPassword",
                  "label": "Confirm Password",
                  "type": "password",
                  "required": true,
                  "validation": "Must match password",
                  "placeholder": "Re-enter password"
                }
              ],
              "submit_button": {
                "text": "Create Team",
                "variant": "primary",
                "full_width": true
              }
            }
          ],
          "error_handling": {
            "email_taken": "Show error: 'This email is already registered. Please login instead.'",
            "validation_error": "Show field-specific validation errors"
          },
          "success_flow": {
            "message": "Team created successfully! Redirecting...",
            "action": "Auto-login with returned token",
            "redirect": "/home"
          }
        }
      },

      "main_app": {
        "home_screen": {
          "route": "/home",
          "description": "Main dashboard with bottom navigation",
          "requires_auth": true,
          "layout": "Bottom navigation with 3 tabs",
          "app_bar": {
            "title": "My Active Tasks / Team Active / My Completed (based on active tab)",
            "actions": [
              {
                "type": "IconButton",
                "icon": "person/account icon",
                "action": "Open profile menu",
                "menu_items": [
                  {
                    "label": "Profile",
                    "icon": "person",
                    "action": "Show user info: name, email, role, organization"
                  },
                  {
                    "label": "Admin Mode",
                    "icon": "admin_panel_settings",
                    "action": "Navigate to /admin",
                    "visible_for": ["ADMIN", "TEAM_MANAGER"]
                  },
                  {
                    "label": "Settings",
                    "icon": "settings",
                    "action": "Navigate to /settings"
                  },
                  {
                    "label": "Logout",
                    "icon": "logout",
                    "action": "Clear token, navigate to /login",
                    "confirmation": "Are you sure you want to logout?"
                  }
                ]
              }
            ]
          },
          "bottom_navigation": {
            "tabs": [
              {
                "id": "my_active",
                "label": "My Active",
                "icon": "assignment_ind",
                "screen": "MyActiveTasksScreen"
              },
              {
                "id": "team_active",
                "label": "Team Active",
                "icon": "people",
                "screen": "TeamActiveTasksScreen"
              },
              {
                "id": "my_completed",
                "label": "My Completed",
                "icon": "check_circle",
                "screen": "MyCompletedTasksScreen"
              }
            ]
          },
          "floating_action_button": {
            "icon": "add",
            "label": "Create Task",
            "action": "Open create task dialog (member self-assignment)",
            "visible_on_tabs": ["my_active"],
            "visible_for_roles": ["MEMBER", "TEAM_MANAGER", "ADMIN"],
            "hidden_for": ["GUEST"]
          }
        },

        "my_active_tasks_screen": {
          "route": "/home (tab 1)",
          "description": "User's TODO and IN_PROGRESS tasks",
          "api_call": "GET /tasks/view?scope=my_active",
          "features": [
            {
              "name": "Pull to Refresh",
              "action": "Reload tasks from API"
            },
            {
              "name": "Task List",
              "component": "ScrollableList of TaskCard",
              "sorting": "By priority (HIGH→NORMAL→LOW), then due date (earliest first)"
            },
            {
              "name": "Empty State",
              "condition": "No tasks",
              "content": {
                "icon": "task_alt",
                "title": "No Active Tasks",
                "message": "You don't have any active tasks. Tap + to create one."
              }
            },
            {
              "name": "Loading State",
              "component": "Skeleton loader with shimmer effect"
            },
            {
              "name": "Error State",
              "content": {
                "icon": "error_outline",
                "title": "Failed to Load Tasks",
                "message": "Error message from API",
                "action_button": "Retry"
              }
            }
          ],
          "task_card": {
            "layout": "Card with priority stripe, content, and actions",
            "components": [
              {
                "name": "Priority Stripe",
                "position": "Left edge",
                "colors": {
                  "HIGH": "Red (#EF4444)",
                  "NORMAL": "Blue (#3B82F6)",
                  "LOW": "Gray (#6B7280)"
                },
                "width": "4px"
              },
              {
                "name": "Header Row",
                "contains": [
                  "Task title (bold, 16sp)",
                  "Priority badge (chip with color)"
                ]
              },
              {
                "name": "Content Row",
                "contains": [
                  "Topic badge (if exists)",
                  "Due date with overdue indicator",
                  "Note preview (first 100 chars, if exists)"
                ]
              },
              {
                "name": "Footer Row",
                "contains": [
                  "Assignee avatar (initials in circle)",
                  "Status dropdown (TODO, IN_PROGRESS, DONE)",
                  "Edit button (opens task dialog)"
                ]
              }
            ],
            "status_dropdown": {
              "type": "Dropdown button",
              "options": ["TODO", "IN_PROGRESS", "DONE"],
              "action": "PATCH /tasks/view/:id/status",
              "optimistic_update": true,
              "error_handling": "Revert on error, show snackbar"
            },
            "edit_action": {
              "action": "Open task edit dialog",
              "dialog_fields": ["title", "note", "status", "priority", "dueDate"],
              "submit": "PATCH /tasks/:id"
            },
            "delete_action": {
              "trigger": "Swipe to delete or menu option",
              "confirmation": "Are you sure you want to delete this task?",
              "submit": "DELETE /tasks/:id"
            }
          }
        },

        "team_active_tasks_screen": {
          "route": "/home (tab 2)",
          "description": "All organization's active tasks (read-only for MEMBER, filtered for GUEST)",
          "api_call": "GET /tasks/view?scope=team_active",
          "features": [
            "Pull to Refresh",
            "Task List (read-only cards)",
            "Empty State",
            "Loading State",
            "Error State"
          ],
          "task_card": {
            "layout": "Same as My Active but read-only",
            "differences": [
              "No status dropdown (status shown as badge)",
              "No edit button",
              "No delete action",
              "Tap to view details dialog (read-only)"
            ],
            "guest_user_differences": [
              "No note shown",
              "No username shown (only assignee name)",
              "Limited fields as per API guest filtering"
            ]
          },
          "filters": {
            "optional_feature": true,
            "filter_options": [
              "By priority (ALL, HIGH, NORMAL, LOW)",
              "By assignee (ALL, specific user)",
              "By topic (ALL, specific topic)"
            ]
          }
        },

        "my_completed_tasks_screen": {
          "route": "/home (tab 3)",
          "description": "User's completed tasks (read-only)",
          "api_call": "GET /tasks/view?scope=my_done",
          "features": [
            "Pull to Refresh",
            "Task List (read-only cards)",
            "Empty State: 'No completed tasks yet'",
            "Loading State",
            "Error State"
          ],
          "task_card": {
            "layout": "Read-only card",
            "shows": [
              "Title",
              "Completed date (formatted: 'Completed on Nov 15, 2025')",
              "Priority badge",
              "Topic badge",
              "Note (expandable)"
            ],
            "actions": [
              "Tap to view full details"
            ]
          },
          "sorting": "By completedAt DESC (most recent first)"
        },

        "guest_topics_screen": {
          "route": "/topics",
          "description": "View accessible topics with tasks (for GUEST users)",
          "visible_for": ["GUEST"],
          "api_call": "GET /topics/active",
          "layout": "List of topic cards with task counts",
          "topic_card": {
            "shows": [
              "Topic title",
              "Topic description (if any)",
              "Task count badge",
              "List of tasks in this topic (filtered)"
            ],
            "task_display": "Nested task cards (read-only)"
          }
        },

        "create_task_dialog": {
          "trigger": "FAB on My Active screen",
          "type": "Modal dialog",
          "title": "Create New Task",
          "fields": [
            {
              "name": "topicId",
              "label": "Topic",
              "type": "dropdown",
              "required": false,
              "options": "Fetched from GET /topics/active",
              "placeholder": "Select a topic (optional)"
            },
            {
              "name": "title",
              "label": "Title",
              "type": "text",
              "required": true,
              "validation": "Min 1 character",
              "placeholder": "What needs to be done?"
            },
            {
              "name": "note",
              "label": "Note",
              "type": "textarea",
              "required": false,
              "max_length": 2000,
              "placeholder": "Add details (optional)"
            },
            {
              "name": "priority",
              "label": "Priority",
              "type": "segmented_button or radio",
              "required": true,
              "default": "NORMAL",
              "options": [
                { "value": "LOW", "label": "Low", "color": "gray" },
                { "value": "NORMAL", "label": "Normal", "color": "blue" },
                { "value": "HIGH", "label": "High", "color": "red" }
              ]
            },
            {
              "name": "dueDate",
              "label": "Due Date",
              "type": "date_picker",
              "required": false,
              "placeholder": "Select due date (optional)"
            }
          ],
          "actions": [
            {
              "label": "Cancel",
              "variant": "text",
              "action": "Close dialog"
            },
            {
              "label": "Create Task",
              "variant": "primary",
              "action": "POST /tasks",
              "loading_state": true,
              "validation": "Disable if title empty"
            }
          ],
          "success": {
            "message": "Task created successfully",
            "action": "Close dialog, refresh task list, show snackbar"
          },
          "error_handling": {
            "show": "Error message in snackbar",
            "keep_dialog_open": true
          }
        }
      },

      "admin": {
        "admin_screen": {
          "route": "/admin",
          "description": "Admin dashboard with tabs",
          "requires_auth": true,
          "required_roles": ["ADMIN", "TEAM_MANAGER"],
          "unauthorized_redirect": "/home",
          "app_bar": {
            "title": "Admin Panel",
            "actions": [
              {
                "icon": "close",
                "label": "Exit Admin Mode",
                "action": "Navigate back to /home"
              }
            ]
          },
          "tabs": [
            {
              "id": "users",
              "label": "Users",
              "icon": "people",
              "screen": "UserManagementTab"
            },
            {
              "id": "tasks",
              "label": "Tasks",
              "icon": "assignment",
              "screen": "TaskManagementTab"
            },
            {
              "id": "topics",
              "label": "Topics",
              "icon": "category",
              "screen": "TopicManagementTab"
            },
            {
              "id": "organization",
              "label": "Organization",
              "icon": "business",
              "screen": "OrganizationTab",
              "visible_for": ["ADMIN", "TEAM_MANAGER"]
            }
          ]
        },

        "user_management_tab": {
          "api_call": "GET /users",
          "features": [
            "Pull to Refresh",
            "User List with cards",
            "Search/Filter by name or email",
            "FAB to create user"
          ],
          "user_card": {
            "shows": [
              "User avatar (initials)",
              "Name (bold)",
              "Email (subtitle)",
              "Role badge (colored chip)",
              "Active/Inactive status badge",
              "Actions menu (edit, delete)"
            ],
            "actions": [
              {
                "label": "Edit",
                "icon": "edit",
                "action": "Open edit user dialog"
              },
              {
                "label": "Delete",
                "icon": "delete",
                "action": "DELETE /users/:id",
                "confirmation": "Are you sure you want to deactivate this user?"
              }
            ]
          },
          "create_user_dialog": {
            "trigger": "FAB",
            "title": "Create New User",
            "fields": [
              {
                "name": "name",
                "label": "Full Name",
                "type": "text",
                "required": true,
                "validation": "Min 1 character"
              },
              {
                "name": "username",
                "label": "Username",
                "type": "text",
                "required": true,
                "validation": "Min 3 characters, alphanumeric + underscore"
              },
              {
                "name": "email",
                "label": "Email",
                "type": "email",
                "required": true,
                "validation": "Valid email format"
              },
              {
                "name": "password",
                "label": "Password",
                "type": "password",
                "required": true,
                "validation": "Min 6 characters"
              },
              {
                "name": "role",
                "label": "Role",
                "type": "dropdown",
                "required": true,
                "options": [
                  { "value": "MEMBER", "label": "Member" },
                  { "value": "GUEST", "label": "Guest" },
                  { "value": "TEAM_MANAGER", "label": "Team Manager", "disabled_for": ["TEAM_MANAGER"] },
                  { "value": "ADMIN", "label": "Admin", "disabled_for": ["TEAM_MANAGER"] }
                ]
              },
              {
                "name": "active",
                "label": "Active",
                "type": "checkbox",
                "default": true
              },
              {
                "name": "visibleTopicIds",
                "label": "Accessible Topics",
                "type": "multi_select",
                "visible_when": "role === 'GUEST'",
                "options": "Fetched from GET /admin/topics",
                "description": "Select topics this guest can view"
              }
            ],
            "submit": "POST /users",
            "error_handling": {
              "user_limit": "Show error: 'Cannot create user. Organization has reached the maximum of 15 active users.'",
              "permission_error": "Show error based on API response"
            }
          },
          "edit_user_dialog": {
            "title": "Edit User",
            "fields": [
              "name (editable)",
              "role (dropdown with restrictions)",
              "active (checkbox)",
              "password (optional - show 'Change Password' checkbox)",
              "visibleTopicIds (if GUEST)"
            ],
            "submit": "PATCH /users/:id",
            "note": "Username and email are NOT editable (unique constraints)"
          }
        },

        "task_management_tab": {
          "api_call": "GET /admin/tasks",
          "features": [
            "Pull to Refresh",
            "Task List (all tasks)",
            "Filter by status (ALL, TODO, IN_PROGRESS, DONE)",
            "Search by title",
            "FAB to create task"
          ],
          "task_card": {
            "shows": [
              "All task details",
              "Assignee (or 'Unassigned')",
              "Topic",
              "Status, Priority, Due Date",
              "Actions: Edit, Delete"
            ]
          },
          "create_task_dialog": {
            "title": "Create Task",
            "fields": [
              {
                "name": "topicId",
                "label": "Topic",
                "type": "dropdown",
                "required": false,
                "options": "GET /admin/topics"
              },
              {
                "name": "title",
                "label": "Title",
                "type": "text",
                "required": true
              },
              {
                "name": "note",
                "label": "Note",
                "type": "textarea",
                "required": false
              },
              {
                "name": "assigneeId",
                "label": "Assign To",
                "type": "dropdown",
                "required": false,
                "options": "GET /users (active users only)",
                "placeholder": "Select user (optional)"
              },
              {
                "name": "status",
                "label": "Status",
                "type": "dropdown",
                "required": true,
                "default": "TODO",
                "options": ["TODO", "IN_PROGRESS", "DONE"]
              },
              {
                "name": "priority",
                "label": "Priority",
                "type": "segmented_button",
                "required": true,
                "default": "NORMAL",
                "options": ["LOW", "NORMAL", "HIGH"]
              },
              {
                "name": "dueDate",
                "label": "Due Date",
                "type": "date_picker",
                "required": false
              }
            ],
            "submit": "POST /admin/tasks"
          },
          "edit_task_dialog": {
            "title": "Edit Task",
            "fields": "Same as create (pre-filled with current values)",
            "submit": "PATCH /admin/tasks/:id"
          }
        },

        "topic_management_tab": {
          "api_call": "GET /admin/topics",
          "features": [
            "Pull to Refresh",
            "Topic List with task counts",
            "FAB to create topic"
          ],
          "topic_card": {
            "shows": [
              "Topic title",
              "Description",
              "Active/Inactive badge",
              "Task count badge",
              "Actions: Edit, Delete"
            ]
          },
          "create_topic_dialog": {
            "title": "Create Topic",
            "fields": [
              {
                "name": "title",
                "label": "Title",
                "type": "text",
                "required": true,
                "validation": "Min 1 character"
              },
              {
                "name": "description",
                "label": "Description",
                "type": "textarea",
                "required": false,
                "max_length": 500
              },
              {
                "name": "isActive",
                "label": "Active",
                "type": "checkbox",
                "default": true
              }
            ],
            "submit": "POST /admin/topics"
          },
          "edit_topic_dialog": {
            "title": "Edit Topic",
            "fields": "Same as create (pre-filled)",
            "submit": "PATCH /admin/topics/:id"
          },
          "delete_confirmation": {
            "message": "Are you sure you want to delete this topic? Tasks in this topic will become uncategorized.",
            "action": "DELETE /admin/topics/:id"
          }
        },

        "organization_tab": {
          "api_calls": [
            "GET /organization/:id",
            "GET /organization/:id/stats"
          ],
          "sections": [
            {
              "title": "Organization Details",
              "shows": [
                "Company Name (editable for TEAM_MANAGER)",
                "Team Name (editable for TEAM_MANAGER)",
                "Slug (read-only)",
                "Max Users (editable for ADMIN only)",
                "Active Status (ADMIN only)"
              ],
              "edit_action": "PATCH /organization/:id"
            },
            {
              "title": "Statistics",
              "shows": [
                "Total Users / Active Users",
                "Total Tasks / Active Tasks / Completed Tasks",
                "Total Topics / Active Topics"
              ],
              "layout": "Cards with icons and numbers"
            }
          ]
        }
      }
    },

    "common_components": {
      "task_card": {
        "variants": ["interactive", "read-only", "compact"],
        "features": [
          "Priority stripe (colored left border)",
          "Priority badge (chip)",
          "Status badge or dropdown",
          "Due date with overdue detection (red color if overdue)",
          "Days remaining badge",
          "Topic badge",
          "Assignee avatar (circular with initials)",
          "Note preview (expandable)",
          "Actions menu"
        ],
        "priority_colors": {
          "HIGH": "#EF4444 (Red)",
          "NORMAL": "#3B82F6 (Blue)",
          "LOW": "#6B7280 (Gray)"
        },
        "status_colors": {
          "TODO": "#6B7280 (Gray)",
          "IN_PROGRESS": "#F59E0B (Amber)",
          "DONE": "#10B981 (Green)"
        }
      },

      "loading_placeholder": {
        "type": "Skeleton loader with shimmer animation",
        "use_cases": [
          "Task list loading",
          "User list loading",
          "Topic list loading"
        ],
        "implementation": "Shimmer effect on gray rectangles matching content layout"
      },

      "empty_state": {
        "components": [
          "Icon (large, gray)",
          "Title (bold)",
          "Message (subtitle)",
          "Action button (optional)"
        ],
        "variants": [
          "No tasks",
          "No users",
          "No topics",
          "No search results"
        ]
      },

      "error_state": {
        "components": [
          "Error icon",
          "Error title",
          "Error message (from API or generic)",
          "Retry button",
          "Go Back button (optional)"
        ]
      },

      "confirmation_dialog": {
        "use_cases": [
          "Delete user",
          "Delete task",
          "Delete topic",
          "Logout"
        ],
        "components": [
          "Warning icon",
          "Message",
          "Cancel button",
          "Confirm button (destructive color)"
        ]
      },

      "snackbar_notifications": {
        "types": [
          "Success (green)",
          "Error (red)",
          "Info (blue)",
          "Warning (amber)"
        ],
        "position": "Bottom center",
        "duration": "3-5 seconds",
        "action_button": "Optional (e.g., 'Undo', 'Retry')"
      },

      "form_field": {
        "features": [
          "Label",
          "Placeholder",
          "Validation (real-time or on blur)",
          "Error message display",
          "Required indicator (*)",
          "Helper text",
          "Icon (prefix or suffix)",
          "Character counter (for textareas)"
        ],
        "types": [
          "Text input",
          "Email input",
          "Password input (with show/hide toggle)",
          "Textarea",
          "Dropdown/Select",
          "Multi-select",
          "Date picker",
          "Checkbox",
          "Radio buttons",
          "Segmented button (for priority)"
        ]
      }
    }
  },

  "state_management": {
    "global_state": {
      "auth_state": {
        "fields": [
          "isAuthenticated (boolean)",
          "token (string | null)",
          "user (User | null)",
          "organization (Organization | null)"
        ],
        "actions": [
          "login(token, user, organization)",
          "logout()",
          "updateUser(user)"
        ],
        "persistence": "Token stored in secure storage, state rehydrated on app load"
      },

      "tasks_state": {
        "fields": [
          "myActiveTasks (Task[])",
          "teamActiveTasks (Task[])",
          "myCompletedTasks (Task[])",
          "isLoading (boolean)",
          "error (string | null)"
        ],
        "actions": [
          "fetchMyActiveTasks()",
          "fetchTeamActiveTasks()",
          "fetchMyCompletedTasks()",
          "updateTaskStatus(taskId, status)",
          "createTask(data)",
          "updateTask(taskId, data)",
          "deleteTask(taskId)"
        ],
        "optimistic_updates": "Update local state immediately, revert on error"
      },

      "admin_state": {
        "fields": [
          "users (User[])",
          "allTasks (Task[])",
          "topics (Topic[])",
          "organizationStats (OrganizationStats | null)"
        ],
        "actions": [
          "fetchUsers()",
          "createUser(data)",
          "updateUser(userId, data)",
          "deleteUser(userId)",
          "fetchAllTasks()",
          "fetchTopics()",
          "createTopic(data)",
          "updateTopic(topicId, data)",
          "deleteTopic(topicId)",
          "fetchOrganizationStats()"
        ]
      }
    },

    "local_component_state": {
      "form_states": "Form field values, validation errors, submission loading",
      "ui_states": "Dialog open/close, dropdown expanded, etc.",
      "filter_states": "Active filters, search query"
    },

    "caching_strategy": {
      "cache_duration": "5 minutes for task lists",
      "invalidation": "On create/update/delete operations",
      "offline_support": "Optional - cache in IndexedDB/AsyncStorage for offline viewing"
    }
  },

  "routing": {
    "public_routes": [
      { "path": "/", "redirect": "/login" },
      { "path": "/login", "component": "LoginScreen" },
      { "path": "/register", "component": "RegistrationScreen" }
    ],
    "protected_routes": [
      { "path": "/home", "component": "HomeScreen", "requires_auth": true },
      { "path": "/admin", "component": "AdminScreen", "requires_auth": true, "required_roles": ["ADMIN", "TEAM_MANAGER"] },
      { "path": "/settings", "component": "SettingsScreen", "requires_auth": true },
      { "path": "/topics", "component": "GuestTopicsScreen", "requires_auth": true, "visible_for": ["GUEST"] }
    ],
    "auth_guard": {
      "description": "Redirect to /login if not authenticated",
      "token_check": "Verify token exists in storage",
      "role_check": "Verify user has required role for route"
    },
    "deep_linking": {
      "optional": true,
      "examples": [
        "/tasks/:taskId - Open task details",
        "/admin/users/:userId - Open user edit dialog"
      ]
    }
  },

  "error_handling": {
    "api_errors": {
      "401_unauthorized": {
        "action": "Clear auth state, redirect to /login",
        "message": "Your session has expired. Please login again."
      },
      "403_forbidden": {
        "action": "Show error message, stay on current screen",
        "message": "You don't have permission to perform this action."
      },
      "404_not_found": {
        "action": "Show error message",
        "message": "Resource not found."
      },
      "409_conflict": {
        "action": "Show field-specific error (e.g., email already exists)",
        "message": "From API error.message"
      },
      "503_service_unavailable": {
        "action": "Show error state with retry button",
        "message": "Service is currently unavailable. Please try again later."
      },
      "network_error": {
        "action": "Show error state",
        "message": "Unable to connect to server. Please check your internet connection."
      },
      "unknown_error": {
        "action": "Show generic error",
        "message": "An unexpected error occurred. Please try again."
      }
    },

    "validation_errors": {
      "client_side": "Show inline field errors before API call",
      "server_side": "Map API validation errors to form fields",
      "display": "Red text below field, red border on field"
    },

    "error_logging": {
      "recommended": "Sentry, LogRocket, or similar",
      "capture": [
        "API errors",
        "Unhandled exceptions",
        "Network failures"
      ]
    }
  },

  "design_system": {
    "colors": {
      "primary": "#4F46E5 (Indigo 600)",
      "primary_dark": "#4338CA (Indigo 700)",
      "primary_light": "#818CF8 (Indigo 400)",
      "secondary": "#10B981 (Emerald 500)",
      "error": "#EF4444 (Red 500)",
      "warning": "#F59E0B (Amber 500)",
      "success": "#10B981 (Green 500)",
      "info": "#3B82F6 (Blue 500)",
      "background": "#FFFFFF (White)",
      "surface": "#F9FAFB (Gray 50)",
      "text_primary": "#111827 (Gray 900)",
      "text_secondary": "#6B7280 (Gray 500)",
      "border": "#E5E7EB (Gray 200)",
      "priority_high": "#EF4444",
      "priority_normal": "#3B82F6",
      "priority_low": "#6B7280",
      "status_todo": "#6B7280",
      "status_in_progress": "#F59E0B",
      "status_done": "#10B981"
    },

    "typography": {
      "font_family": "System font (San Francisco, Roboto, Segoe UI)",
      "sizes": {
        "h1": "32sp/px, bold",
        "h2": "24sp/px, bold",
        "h3": "20sp/px, semibold",
        "h4": "18sp/px, semibold",
        "body": "16sp/px, regular",
        "body_small": "14sp/px, regular",
        "caption": "12sp/px, regular",
        "button": "16sp/px, medium"
      }
    },

    "spacing": {
      "xs": "4px",
      "sm": "8px",
      "md": "16px",
      "lg": "24px",
      "xl": "32px",
      "xxl": "48px"
    },

    "border_radius": {
      "sm": "4px",
      "md": "8px",
      "lg": "12px",
      "xl": "16px",
      "full": "9999px (for circular elements)"
    },

    "shadows": {
      "sm": "0 1px 2px 0 rgba(0, 0, 0, 0.05)",
      "md": "0 4px 6px -1px rgba(0, 0, 0, 0.1)",
      "lg": "0 10px 15px -3px rgba(0, 0, 0, 0.1)"
    }
  },

  "accessibility": {
    "requirements": [
      "Semantic HTML/proper component hierarchy",
      "ARIA labels for icons and buttons",
      "Keyboard navigation support (web)",
      "Screen reader support",
      "Sufficient color contrast (WCAG AA)",
      "Touch targets min 44x44px (mobile)",
      "Focus indicators",
      "Error messages announced to screen readers"
    ]
  },

  "performance_optimization": {
    "best_practices": [
      "Lazy loading for routes",
      "Image optimization",
      "Code splitting",
      "Memoization for expensive computations",
      "Virtual scrolling for long lists (1000+ items)",
      "Debouncing for search inputs",
      "Optimistic UI updates",
      "Request deduplication",
      "Pagination for large datasets (optional)"
    ]
  },

  "testing_requirements": {
    "unit_tests": {
      "coverage": "70%+",
      "focus_areas": [
        "Business logic functions",
        "State management actions",
        "Utility functions",
        "Validation functions"
      ]
    },

    "integration_tests": {
      "focus_areas": [
        "API integration",
        "Authentication flow",
        "CRUD operations",
        "Error handling"
      ]
    },

    "e2e_tests": {
      "critical_flows": [
        "User login → view tasks → update status",
        "Admin login → create user → logout",
        "Team manager creates task → assigns to member",
        "Guest login → view limited tasks"
      ],
      "tools": ["Playwright", "Cypress", "Detox (mobile)"]
    }
  },

  "deployment": {
    "web": {
      "build": "npm run build",
      "hosting_options": ["Vercel", "Netlify", "AWS S3 + CloudFront", "Firebase Hosting"],
      "environment_variables": {
        "REACT_APP_API_URL": "https://api.diplomam.net",
        "REACT_APP_ENV": "production"
      }
    },

    "mobile": {
      "android": {
        "build": "flutter build apk --release or gradlew assembleRelease",
        "signing": "Required for Google Play Store",
        "distribution": ["Google Play Store", "APK direct download"]
      },
      "ios": {
        "build": "flutter build ios --release or xcodebuild",
        "signing": "Apple Developer account required",
        "distribution": ["App Store", "TestFlight"]
      }
    }
  },

  "implementation_checklist": {
    "phase_1_authentication": [
      "Login screen UI",
      "Registration screen UI",
      "API integration for login",
      "API integration for registration",
      "Token storage in secure storage",
      "Auth state management",
      "Auth guard for protected routes"
    ],

    "phase_2_core_features": [
      "Home screen with bottom navigation",
      "My Active Tasks screen",
      "Team Active Tasks screen",
      "My Completed Tasks screen",
      "Task card component (all variants)",
      "Create task functionality",
      "Update task status",
      "Task details view",
      "Pull to refresh",
      "Loading states",
      "Empty states",
      "Error states"
    ],

    "phase_3_admin_features": [
      "Admin screen with tabs",
      "User management (list, create, edit, delete)",
      "Topic management (list, create, edit, delete)",
      "Task management admin view",
      "Organization details view",
      "Organization statistics",
      "Guest topic access management"
    ],

    "phase_4_polish": [
      "Form validation",
      "Error handling",
      "Confirmation dialogs",
      "Snackbar notifications",
      "Search/filter functionality",
      "Date formatting",
      "Responsive design (web)",
      "Dark mode (optional)",
      "Accessibility improvements",
      "Performance optimization"
    ],

    "phase_5_testing_deployment": [
      "Unit tests",
      "Integration tests",
      "E2E tests",
      "Production build",
      "Deployment setup",
      "Monitoring setup"
    ]
  },

  "developer_notes": {
    "important_considerations": [
      "Always include organizationId in API requests (automatically sent via JWT)",
      "Handle guest user field filtering on team_active endpoint",
      "Implement optimistic updates for better UX",
      "Cache task lists to reduce API calls",
      "Use proper error boundaries to catch React errors",
      "Test with different roles (ADMIN, TEAM_MANAGER, MEMBER, GUEST)",
      "Validate forms client-side before API calls",
      "Handle token expiration gracefully",
      "Test network failure scenarios",
      "Follow platform-specific design guidelines (Material Design for Android, Human Interface Guidelines for iOS)"
    ],

    "common_pitfalls": [
      "Forgetting to refresh task lists after create/update/delete",
      "Not handling 401 errors (expired tokens)",
      "Hardcoding API base URL instead of using env variables",
      "Not showing loading states during API calls",
      "Ignoring guest user filtering requirements",
      "Not testing with 15 user limit edge case",
      "Forgetting to clear state on logout",
      "Not handling cross-organization access errors"
    ],

    "recommended_libraries": {
      "web_react": [
        "axios or @tanstack/react-query (API calls)",
        "react-hook-form + zod (forms)",
        "zustand or redux-toolkit (state)",
        "react-router-dom (routing)",
        "date-fns or dayjs (dates)",
        "react-hot-toast or notistack (notifications)",
        "@mui/material or shadcn/ui (UI components)"
      ],
      "mobile_flutter": [
        "dio + retrofit (API)",
        "flutter_riverpod (state)",
        "go_router (routing)",
        "flutter_secure_storage (token storage)",
        "intl (date formatting)",
        "json_serializable (JSON parsing)"
      ]
    }
  }
}
